<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Shoe-catalofue | A Javascript application for a simple shoe ordering system</title>
    <link rel="stylesheet" href="css/styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.10/lodash.min.js"></script>
</head>
<body>
    <div class="container">
        <div class="topbar">
            <h1>Shoe Catalogue App<br><small>A simple javascript shoe catalogue application</small></h1>
        </div>

        <div class="add-shoe">
            <input type="text" class="shoe-brand" placeholder="Brand name">
            <input type="colour" class="shoe-colour" placeholder="Shoe colour">
            <input type="number" class="shoe-size" placeholder="Shoe size">
            <input type="number" class="shoe-price" placeholder="Shoe price">
            <input type="number" class="shoe-qty" placeholder="In stock">
            <button type="submit" class="add-button">Add </button>
        </div>

        <div class="main clearfix">
            <section class="display-area">
                <h2>Choose a product</h2>
                Filter By:<br><br>
                <select name="brand" class="brand-select">
                    <option value="">Choose brand</option>
                    <option value="Nike">nike</option>
                    <option value="Adidas">adidas</option>
                    <option value="puma">puma</option>
                    <option value="reebok">Reebok</option>
                </select>
                <select name="brand" class="colour-select">
                    <option value="">Choose colour</option>
                    <option value="Black">Black</option>
                    <option value="White">White</option>
                    <option value="Brown">Brown</option>
                    <option value="Blue">Blue</option>
                </select>
                <select name="size" class="size-select">
                    <option value="">Choose size</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                </select>
                <div><button class="open-add-section">Add new item</button></div>
            </section>
            <section class="display-area">
 
                <script type="text/x-template" class="example">
                    {{#each}}
                        <div class="shoe clearfix">
                            <table>
                                <tr>
                                    <td><b>Brand:</b></td>
                                    <td>Studio.W</td> 
                                </tr>
                                <tr>
                                    <td>Colour:</b></td>
                                    <td><b>Black</td>
                                </tr>
                                <tr>
                                    <td><b>Size:</b></td>
                                    <td>6.5</td>
                                </tr>
                                <tr>
                                    <td><b>Price:</b></td>
                                    <td>R1 999.00</td>
                                </tr>
                                <tr>
                                    <td><b>Qty:</b></td>
                                    <td>7</td>
                                </tr>
                            </table>
                            <!-- // Buy button -->
                            <aside class="item-image"></aside>
                            <!-- <button>Buy</button> -->
                        </div>
                    {{/each}}
                </script>

            </section>
        </div>
    </div>
    <script src="js/shoe-catalogue.factory.js"></script>

<script>


var shoeAdd = document.querySelector('.add-shoe');
var btnAddItem = document.querySelector('.add-button');
var btnAddSection = document.querySelector('.open-add-section');
var brandElem = document.querySelector('.shoe-brand');
var colourElem = document.querySelector('.shoe-colour');
var sizeElem = document.querySelector('.shoe-size');
var priceElem = document.querySelector('.shoe-price');
var qtyElem = document.querySelector('.shoe-qty');

// selects / filter
var brandSelect = document.querySelector('.brand-select');
var colourSelect = document.querySelector('.colour-select');
var sizeSelect = document.querySelector('.size-select');

// get stored data
var storedShoes = localStorage.getItem('AVAILABLE_SHOES') ? JSON.parse(localStorage.getItem('AVAILABLE_SHOES')) : [];
// instance
var shoes = ShoeCatalogue(storedShoes);

btnAddSection.addEventListener('click', function(){
    shoeAdd.classList.toggle('show');
})

btnAddItem.addEventListener('click', function() {
    shoes.new(
        brandElem.value,
        colourElem.value,
        sizeElem.value,
        priceElem.value,
        qtyElem.value
    );
    localStorage.setItem('AVAILABLE_SHOES', JSON.stringify(shoes.map()));
});

brandSelect.addEventListener('change', function(){
    let filterBrand = brandSelect.value;
    let filterColour = colourSelect.value;
    let filterSize = sizeSelect.value;
    shoes.brandFilter(filterBrand, filterColour, filterSize);
});

colourSelect.addEventListener('change', function(){
    let filterBrand = brandSelect.value;
    let filterColour = colourSelect.value;
    let filterSize = sizeSelect.value;
    shoes.colorFilter(filterBrand, filterColour, filterSize);
}); 

sizeSelect.addEventListener('change', function(){
    let filterBrand = brandSelect.value;
    let filterColour = colourSelect.value;
    let filterSize = sizeSelect.value;
    shoes.sizeFilter(filterBrand, filterColour, filterSize);
});

</script>
</body>
</html>

